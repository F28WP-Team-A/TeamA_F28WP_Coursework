<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Socket.IO Chat</title>
    <link rel="stylesheet" href="index.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap"
      rel="stylesheet"
    />
    <link
    href=""https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap"
    rel="stylesheet">
  </head>

  <body id="game">
    <h1>Hello World</h1>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      $(function () {
        let socket = io();
        let playerId = null;
        // function logout() {
        //   let data = {
        //     email: "",
        //     last_time_active: new Date(),
        //   };

        $("body").keydown(playerKeyDown);

        socket.on("connect", function () {
          playerId = socket.id;
        });

        // socket.on("gameState", function (state) {
        //   renderState(state);
        // });

        function renderState(state) {
          state.players.map((p) => {
            var newDiv = document.createElement("div");
            newDiv.style.backgroundColor = "red";
            newDiv.style.width = "25px";
            newDiv.style.height = "25px";
            document.getElementById("game").appendChild(newDiv); // Append <li> to <ul> with id="myList"
          });
        }

        function playerKeyDown(event) {
          console.log(event.keyCode);
          switch (event.keyCode) {
            case 38:
              socket.emit("player moved", {
                playerId: playerId,
                direction: "up",
              });
              break;
            case 40:
              socket.emit("player moved", {
                playerId: playerId,
                direction: "down",
              });

              // code block
              break;
            case 37:
              socket.emit("player moved", {
                playerId: playerId,
                direction: "left",
              });
              break;
            case 39:
              socket.emit("player moved", {
                playerId: playerId,
                direction: "right",
              });
              break;
            default:
            // code block
          }
        }
      });
    </script>

    <!-- <button type="button" onclick="logout()">Logout</button> -->
  </body>
</html>
